<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Homes</title>
  <link rel="stylesheet" href="/output.css" />
  <link rel="icon" href="/icon.png" />
</head>

<body class="bg-gradient-to-br from-red-100 to-orange-100">
  <%- include('../partials/loader.ejs') %>
  </div>
  <div class="flex flex-col min-h-screen">
    <%- include('../partials/navbar.ejs') %>
      <main class="flex flex-col items-center justify-center px-4 pt-2 mt-24 text-center pb-90">
        <div
          class="mt-[-78px] w-fit rounded-lg bg-gradient-to-r from-pink-400 via-red-300 to-red-400 px-6 py-4 shadow-md mb-5">
          <div class="flex items-center justify-center space-x-2">
            <img src="/icon.png" alt="Stay Icon" class="w-6 h-6 rounded-full" />
            <h2 class="text-2xl font-bold tracking-tight text-red-900">
              Find Your Next Stay
            </h2>
          </div>
          <p class="max-w-sm mt-2 text-sm text-gray-700 text-center font-semibold">
            Book unique places to stay or become a host and earn by sharing your
            space with travelers worldwide.
          </p>
        </div>

        <% if (listedHomes.length===0) { %>
          <div class="flex items-center justify-start py-5 px-0.5">
            <div class="text-center p-6 rounded-lg h-32 w-100 mt-16">
              <h2 class="text-xl font-semibold text-gray-800">
                No listings found
              </h2>
              <p class="text-gray-600 mt-2 font-semibold">
                Please check back later.
              </p>
            </div>
          </div>
          <% } %>

            <div class="grid w-full gap-6 max-w-7xl sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
              <!-- Inside the listedHomes.forEach loop -->
              <% listedHomes.forEach(home=> { %>
                <div
                  class="flex flex-col items-start justify-start w-full h-full p-2 backdrop-blur-lg bg-white/20 border border-white/30 rounded-xl shadow-md hover:shadow-lg hover:scale-[1.01] transition-all duration-300 cursor-pointer">
                  <div class="w-full text-left">
                    <h3 class="pb-1 mb-2 text-xl font-semibold text-orange-700 border-b border-orange-300">
                      üë§ Home Name: <%= home.homename %>
                    </h3>
                    <div class="text-gray-800 space-y-1 text-[14.5px] leading-tight">
                      <p>
                        <span class="font-bold text-gray-900">üó∫Ô∏è Location:</span>
                        <%= home.location %>
                      </p>
                      <p>
                        <span class="font-bold text-gray-900">üíµ Price:</span> ‚Çπ<%= home.price %>
                          <span class="font-semibold text-gray-900">/night</span>
                      </p>
                      <p>
                        <span class="font-bold text-gray-900">‚òéÔ∏è Contact Details:</span>
                        <%= home.contactdetails %>
                      </p>
                      <p>
                        <span class="font-bold text-gray-900">‚ùÑÔ∏è AC Service:</span>
                        <%= home.ac_service %>
                      </p>
                    </div>
                    <div class="mt-3">
                      <span class="font-bold text-gray-900">üé¥ Image Preview:</span>
                      <div class="w-full h-52 overflow-hidden border border-gray-300 shadow-md rounded-xl mt-1">
                        <img src="<%= home.image %>" alt="Image Preview" class="object-cover w-full h-full"
                          id="imagePreview" />
                      </div>
                    </div>
                    <div class="mt-3 grid grid-cols-2 gap-2">
                      <form action="/favorites/<%= home._id %>" method="POST">
                        <button type="submit"
                          class="px-6 py-3 text-white text-sm font-semibold text-center rounded-lg scale-90 bg-gradient-to-r from-green-700 to-emerald-800 shadow-md hover:scale-95 transition-transform hover:cursor-pointer flex items-center justify-center w-full">
                          ‚ù§Ô∏èAdd to Favorites
                        </button>
                      </form>

                      <button type="button"
                        class="px-6 py-3 text-white text-sm font-semibold text-center rounded-lg scale-90 bg-gradient-to-r from-blue-400 to-indigo-500 shadow-md hover:scale-95 transition-transform hover:cursor-pointer flex items-center justify-center w-full">
                        <a href="/homes/<%= home._id %>">üß≠View Details</a>
                      </button>
                    </div>
                  </div>
                </div>
                <% }); %>
            </div>
      </main>
      <%- include('../partials/footer.ejs') %>
  </div>
  <script src="/js/loaderLogic.js"></script>
</body>

</html>